---
layout: post
title: C++计算程序运行时间
date: 2021-06-02
author: zxl19
tags: [C++, Note]
comments: true
toc: true
pinned: false
---

几种C++计算程序运行时间的方法，包括针对代码段的高、低精度计时方法以及对于程序整体的计时方法。

<!-- more -->

## 代码段运行时间

### 低精度

```cpp
#include <ctime>            // 需要包含头文件

clock_t start = clock();    // 开始时间
// do something
clock_t end = clock();      // 结束时间
std::cout << "Spent " << double(end - start) / CLOCKS_PER_SEC << " seconds." << std::endl;  // 输出时间（单位：s）
```

### 高精度

以`std::chrono::high_resolution_clock`为例进行说明：

```cpp
#include <chrono>           // 需要包含头文件

std::chrono::high_resolution_clock::time_point start = std::chrono::high_resolution_clock::now();   // 开始时间
// do something
std::chrono::high_resolution_clock::time_point end = std::chrono::high_resolution_clock::now();     // 结束时间
std::chrono::microseconds duration =
    std::chrono::duration_cast<std::chrono::microseconds>(end - start); // 单位：ms
std::cout << "Spent "
          << double(duration.count()) * std::chrono::microseconds::period::num /
                 std::chrono::microseconds::period::den
          << " seconds." << std::endl;  // 输出时间（单位：s）
```

具体工程实现参考[gaoxiang12/faster-lio](https://github.com/gaoxiang12/faster-lio)。

## 程序整体运行时间

在Linux系统中使用`time`命令计算可执行文件的运行时间：

```shell
time ./a.out
```

## 参考

1. [C++11——chrono库开发高精度计！我们可能学的不是同一门语言~-C语言编程俱乐部的文章-知乎](https://zhuanlan.zhihu.com/p/194231797)
2. [C++11的chrono库-小武的文章-知乎](https://zhuanlan.zhihu.com/p/432564292)
3. [chrono1-CSDN博客](https://blog.csdn.net/oncealong/article/details/28599655)
4. [chrono2-CSDN博客](https://blog.csdn.net/u013390476/article/details/50209603)
5. [C++下四种常用的程序运行时间的计时方法总结-阿贵的文章-知乎](https://zhuanlan.zhihu.com/p/54665895)
6. [gaoxiang12/faster-lio](https://github.com/gaoxiang12/faster-lio)
7. [Linux time命令-菜鸟教程](https://www.runoob.com/linux/linux-comm-time.html)
